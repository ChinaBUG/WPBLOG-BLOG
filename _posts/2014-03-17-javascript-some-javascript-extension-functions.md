---
ID: 3260
post_title: >
  Javascript-整理一些JavaScript时间处理扩展函数
author: ChinaBUG
post_excerpt: ""
layout: post
permalink: >
  http://blog.ipodmp.com/2014/03/javascript-some-javascript-extension-functions.html
published: true
post_date: 2014-03-17 00:03:30
---
在JavaScript中，时间处理是经常需要用到的。最近想要慢慢建立自己的代码库，整理了几个之前用到的js处理时间的函数，发出来跟大家分享一下，以后的使用中会不断增加和修改代码库。
<h4>把字符串转换为日期对象</h4>
有时需要把字符串转换为日期对象，但是IE下不支持new Date("2011-04-07")这样实例化日期对象，ff下支持，所以写了一个扩展函数，用来把形如yyyy-mm-dd或者dd/mm/yyyy的字符串转换为日期对象。代码如下：
<div id="highlighter_419228">
<div>
<div>
<table>
<tbody>
<tr>
<td><code>01</code></td>
<td><code>/*</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>02</code></td>
<td><code>函数：把字符串转换为日期对象</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>03</code></td>
<td><code>参数：yyyy-mm-dd或dd/mm/yyyy形式的字符串</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>04</code></td>
<td><code>返回：Date对象</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>05</code></td>
<td><code>注：IE下不支持直接实例化日期对象，如new Date("2011-04-06")</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>06</code></td>
<td><code>*/</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>07</code></td>
<td><code>Date.prototype.convertDate = </code><code>function</code> <code>(date) </code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>08</code></td>
<td><code>{</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>09</code></td>
<td><code>    </code><code>var</code> <code>flag = </code><code>true</code><code>;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>10</code></td>
<td><code>    </code><code>var</code> <code>dateArray = date.split(</code><code>"-"</code><code>);</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>11</code></td>
<td><code>    </code><code>if</code> <code>(dateArray.length != 3) </code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>12</code></td>
<td><code>    </code><code>{</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>13</code></td>
<td><code>        </code><code>dateArray = date.split(</code><code>"/"</code><code>);</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>14</code></td>
<td><code>        </code><code>if</code> <code>(dateArray.length != 3) </code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>15</code></td>
<td><code>        </code><code>{</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>16</code></td>
<td><code>            </code><code>return</code> <code>null</code><code>;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>17</code></td>
<td><code>        </code><code>}</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>18</code></td>
<td><code>        </code><code>flag = </code><code>false</code><code>;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>19</code></td>
<td><code>    </code><code>}</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>20</code></td>
<td><code>    </code><code>var</code> <code>newDate = </code><code>new</code> <code>Date();</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>21</code></td>
<td><code>    </code><code>if</code> <code>(flag) </code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>22</code></td>
<td><code>    </code><code>{</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>23</code></td>
<td><code>        </code><code>// month从0开始</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>24</code></td>
<td><code>        </code><code>newDate.setFullYear(dateArray[0], dateArray[1] - 1, dateArray[2]);</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>25</code></td>
<td><code>    </code><code>}</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>26</code></td>
<td><code>    </code><code>else</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>27</code></td>
<td><code>    </code><code>{</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>28</code></td>
<td><code>        </code><code>newDate.setFullYear(dateArray[2], dateArray[1] - 1, dateArray[0]);</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>29</code></td>
<td><code>    </code><code>}</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>30</code></td>
<td><code>    </code><code>newDate.setHours(0, 0, 0);</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>31</code></td>
<td><code>    </code><code>return</code> <code>newDate;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>32</code></td>
<td><code>};</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
测试：
<div id="highlighter_283240">
<div>
<div>
<table>
<tbody>
<tr>
<td><code>1</code></td>
<td><code>&lt;script type=</code><code>"text/javascript"</code><code>&gt;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>2</code></td>
<td><code>　　document.writeln(</code><code>new</code> <code>Date().convertDate(</code><code>"7/12/2011"</code><code>));</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>3</code></td>
<td><code>&lt;/script&gt;</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
输出：Wed Dec 07 2011 17:30:58 GMT+0800
<h4>计算两个日期之间的差值</h4>
这个函数可以计算两个日期之前的差值（毫秒/秒/分/小时/天），主要用到了getTime()函数和Math.floor()函数，代码如下：
<div id="highlighter_938520">
<div>
<div>
<table>
<tbody>
<tr>
<td><code>01</code></td>
<td><code>/*</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>02</code></td>
<td><code>函数：计算两个日期之间的差值</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>03</code></td>
<td><code>参数：date是日期对象</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>04</code></td>
<td><code>    </code><code>flag：ms-毫秒，s-秒，m-分，h-小时，d-天，M-月，y-年</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>05</code></td>
<td><code>返回：当前日期和date两个日期相差的毫秒/秒/分/小时/天</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>06</code></td>
<td><code>*/</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>07</code></td>
<td><code>Date.prototype.dateDiff = </code><code>function</code> <code>(date, flag) </code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>08</code></td>
<td><code>{</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>09</code></td>
<td><code>    </code><code>var</code> <code>msCount;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>10</code></td>
<td><code>    </code><code>var</code> <code>diff = </code><code>this</code><code>.getTime() - date.getTime();</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>11</code></td>
<td><code>    </code><code>switch</code> <code>(flag) </code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>12</code></td>
<td><code>    </code><code>{</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>13</code></td>
<td><code>        </code><code>case</code> <code>"ms"</code><code>:</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>14</code></td>
<td><code>            </code><code>msCount = 1;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>15</code></td>
<td><code>            </code><code>break</code><code>;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>16</code></td>
<td><code>        </code><code>case</code> <code>"s"</code><code>:</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>17</code></td>
<td><code>            </code><code>msCount = 1000;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>18</code></td>
<td><code>            </code><code>break</code><code>;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>19</code></td>
<td><code>        </code><code>case</code> <code>"m"</code><code>:</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>20</code></td>
<td><code>            </code><code>msCount = 60 * 1000;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>21</code></td>
<td><code>            </code><code>break</code><code>;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>22</code></td>
<td><code>        </code><code>case</code> <code>"h"</code><code>:</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>23</code></td>
<td><code>            </code><code>msCount = 60 * 60 * 1000;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>24</code></td>
<td><code>            </code><code>break</code><code>;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>25</code></td>
<td><code>        </code><code>case</code> <code>"d"</code><code>:</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>26</code></td>
<td><code>            </code><code>msCount = 24 * 60 * 60 * 1000;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>27</code></td>
<td><code>            </code><code>break</code><code>;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>28</code></td>
<td><code>    </code><code>}</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>29</code></td>
<td><code>    </code><code>return</code> <code>Math.floor(diff / msCount);</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>30</code></td>
<td><code>};</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
测试：
<div id="highlighter_995378">
<div>
<div>
<table>
<tbody>
<tr>
<td><code>1</code></td>
<td><code>&lt;script type=</code><code>"text/javascript"</code><code>&gt;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>2</code></td>
<td><code>　　</code><code>var</code> <code>d1 = </code><code>new</code> <code>Date().convertDate(</code><code>"2011-04-08"</code><code>);</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>3</code></td>
<td><code>　　</code><code>var</code> <code>d2 = </code><code>new</code> <code>Date().convertDate(</code><code>"2011-04-07"</code><code>);</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>4</code></td>
<td><code>　　document.writeln(d1.dateDiff(d2, </code><code>'d'</code><code>));</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>5</code></td>
<td><code>&lt;/script&gt;</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<h4>判断一个年份是否为闰年</h4>
<div id="highlighter_849458">
<div>
<div>
<table>
<tbody>
<tr>
<td><code>1</code></td>
<td><code>/*</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>2</code></td>
<td><code>函数：判断一个年份是否为闰年</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>3</code></td>
<td><code>返回：是否为闰年</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>4</code></td>
<td><code>*/</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>5</code></td>
<td><code>Date.prototype.isLeapYear = </code><code>function</code> <code>() </code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>6</code></td>
<td><code>{</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>7</code></td>
<td><code>    </code><code>var</code> <code>year = </code><code>this</code><code>.getFullYear();</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>8</code></td>
<td><code>    </code><code>return</code> <code>(year % 4 == 0) &amp;&amp; (year % 100 != 0 || year % 400 == 0);</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>9</code></td>
<td><code>}</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
测试：
<div id="highlighter_260148">
<div>
<div>
<table>
<tbody>
<tr>
<td><code>1</code></td>
<td><code>&lt;script type=</code><code>"text/javascript"</code><code>&gt;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>2</code></td>
<td><code>　　document.writeln(</code><code>new</code> <code>Date().convertDate(</code><code>"2000-04-08"</code><code>).isLeapYear() + </code><code>"&lt;br&gt;"</code><code>);</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>3</code></td>
<td><code>　　document.writeln(</code><code>new</code> <code>Date().convertDate(</code><code>"2011-04-08"</code><code>).isLeapYear() + </code><code>"&lt;br&gt;"</code><code>);</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>4</code></td>
<td><code>&lt;/script&gt;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>5</code></td>
<td><code>// 结果：</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>6</code></td>
<td><code>// true</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>7</code></td>
<td><code>// false</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<h4>格式化日期</h4>
这个函数是从网上搜来的，稍微修改了一下，它类似.net中Format函数，传入格式化字符串如"yyyy-MM-dd"，返回格式化后的日期。
<div id="highlighter_997813">
<div>
<div>
<table>
<tbody>
<tr>
<td><code>01</code></td>
<td><code>/*</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>02</code></td>
<td><code>函数：格式化日期</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>03</code></td>
<td><code>参数：formatStr-格式化字符串</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>04</code></td>
<td><code>    </code><code>d：将日显示为不带前导零的数字，如1</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>05</code></td>
<td><code>    </code><code>dd：将日显示为带前导零的数字，如01</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>06</code></td>
<td><code>    </code><code>ddd：将日显示为缩写形式，如Sun</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>07</code></td>
<td><code>    </code><code>dddd：将日显示为全名，如Sunday</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>08</code></td>
<td><code>    </code><code>M：将月份显示为不带前导零的数字，如一月显示为1</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>09</code></td>
<td><code>    </code><code>MM：将月份显示为带前导零的数字，如01</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>10</code></td>
<td><code>    </code><code>MMM：将月份显示为缩写形式，如Jan</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>11</code></td>
<td><code>    </code><code>MMMM：将月份显示为完整月份名，如January</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>12</code></td>
<td><code>    </code><code>yy：以两位数字格式显示年份</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>13</code></td>
<td><code>    </code><code>yyyy：以四位数字格式显示年份</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>14</code></td>
<td><code>    </code><code>h：使用12小时制将小时显示为不带前导零的数字，注意||的用法</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>15</code></td>
<td><code>    </code><code>hh：使用12小时制将小时显示为带前导零的数字</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>16</code></td>
<td><code>    </code><code>H：使用24小时制将小时显示为不带前导零的数字</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>17</code></td>
<td><code>    </code><code>HH：使用24小时制将小时显示为带前导零的数字</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>18</code></td>
<td><code>    </code><code>m：将分钟显示为不带前导零的数字</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>19</code></td>
<td><code>    </code><code>mm：将分钟显示为带前导零的数字</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>20</code></td>
<td><code>    </code><code>s：将秒显示为不带前导零的数字</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>21</code></td>
<td><code>    </code><code>ss：将秒显示为带前导零的数字</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>22</code></td>
<td><code>    </code><code>l：将毫秒显示为不带前导零的数字</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>23</code></td>
<td><code>    </code><code>ll：将毫秒显示为带前导零的数字</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>24</code></td>
<td><code>    </code><code>tt：显示am/pm</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>25</code></td>
<td><code>    </code><code>TT：显示AM/PM</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>26</code></td>
<td><code>    </code><code>返回：格式化后的日期</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>27</code></td>
<td><code>*/</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>28</code></td>
<td><code>Date.prototype.format = </code><code>function</code> <code>(formatStr) </code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>29</code></td>
<td><code>{</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>30</code></td>
<td><code>    </code><code>var</code> <code>date = </code><code>this</code><code>;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>31</code></td>
<td><code>    </code><code>/*</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>32</code></td>
<td><code>    </code><code>函数：填充0字符</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>33</code></td>
<td><code>    </code><code>参数：value-需要填充的字符串, length-总长度</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>34</code></td>
<td><code>    </code><code>返回：填充后的字符串</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>35</code></td>
<td><code>    </code><code>*/</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>36</code></td>
<td><code>    </code><code>var</code> <code>zeroize = </code><code>function</code> <code>(value, length) </code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>37</code></td>
<td><code>    </code><code>{</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>38</code></td>
<td><code>        </code><code>if</code> <code>(!length) </code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>39</code></td>
<td><code>        </code><code>{</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>40</code></td>
<td><code>            </code><code>length = 2;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>41</code></td>
<td><code>        </code><code>}</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>42</code></td>
<td><code>        </code><code>value = </code><code>new</code> <code>String(value);</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>43</code></td>
<td><code>        </code><code>for</code> <code>(</code><code>var</code> <code>i = 0, zeros = </code><code>''</code><code>; i &lt; (length - value.length); i++) </code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>44</code></td>
<td><code>        </code><code>{</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>45</code></td>
<td><code>            </code><code>zeros += </code><code>'0'</code><code>;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>46</code></td>
<td><code>        </code><code>}</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>47</code></td>
<td><code>        </code><code>return</code> <code>zeros + value;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>48</code></td>
<td><code>    </code><code>};</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>49</code></td>
<td><code>    </code><code>return</code> <code>formatStr.replace(/</code><code>"[^"</code><code>]*"|</code><code>'[^'</code><code>]*'|\b(?:d{1,4}|M{1,4}|yy(?:yy)?|([hHmstT])\1?|[lLZ])\b/g, </code><code>function</code><code>($0) </code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>50</code></td>
<td><code>    </code><code>{</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>51</code></td>
<td><code>        </code><code>switch</code> <code>($0) </code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>52</code></td>
<td><code>        </code><code>{</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>53</code></td>
<td><code>            </code><code>case</code> <code>'d'</code><code>: </code><code>return</code> <code>date.getDate();</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>54</code></td>
<td><code>            </code><code>case</code> <code>'dd'</code><code>: </code><code>return</code> <code>zeroize(date.getDate());</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>55</code></td>
<td><code>            </code><code>case</code> <code>'ddd'</code><code>: </code><code>return</code> <code>[</code><code>'Sun'</code><code>, </code><code>'Mon'</code><code>, </code><code>'Tue'</code><code>, </code><code>'Wed'</code><code>, </code><code>'Thr'</code><code>, </code><code>'Fri'</code><code>, </code><code>'Sat'</code><code>][date.getDay()];</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>56</code></td>
<td><code>            </code><code>case</code> <code>'dddd'</code><code>: </code><code>return</code> <code>[</code><code>'Sunday'</code><code>, </code><code>'Monday'</code><code>, </code><code>'Tuesday'</code><code>, </code><code>'Wednesday'</code><code>, </code><code>'Thursday'</code><code>, </code><code>'Friday'</code><code>, </code><code>'Saturday'</code><code>][date.getDay()];</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>57</code></td>
<td><code>            </code><code>case</code> <code>'M'</code><code>: </code><code>return</code> <code>date.getMonth() + 1;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>58</code></td>
<td><code>            </code><code>case</code> <code>'MM'</code><code>: </code><code>return</code> <code>zeroize(date.getMonth() + 1);</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>59</code></td>
<td><code>            </code><code>case</code> <code>'MMM'</code><code>: </code><code>return</code> <code>[</code><code>'Jan'</code><code>, </code><code>'Feb'</code><code>, </code><code>'Mar'</code><code>, </code><code>'Apr'</code><code>, </code><code>'May'</code><code>, </code><code>'Jun'</code><code>, </code><code>'Jul'</code><code>, </code><code>'Aug'</code><code>, </code><code>'Sep'</code><code>, </code><code>'Oct'</code><code>, </code><code>'Nov'</code><code>, </code><code>'Dec'</code><code>][date.getMonth()];</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>60</code></td>
<td><code>            </code><code>case</code> <code>'MMMM'</code><code>: </code><code>return</code> <code>[</code><code>'January'</code><code>, </code><code>'February'</code><code>, </code><code>'March'</code><code>, </code><code>'April'</code><code>, </code><code>'May'</code><code>, </code><code>'June'</code><code>, </code><code>'July'</code><code>, </code><code>'August'</code><code>, </code><code>'September'</code><code>, </code><code>'October'</code><code>, </code><code>'November'</code><code>, </code><code>'December'</code><code>][date.getMonth()];</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>61</code></td>
<td><code>            </code><code>case</code> <code>'yy'</code><code>: </code><code>return</code> <code>new</code> <code>String(date.getFullYear()).substr(2);</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>62</code></td>
<td><code>            </code><code>case</code> <code>'yyyy'</code><code>: </code><code>return</code> <code>date.getFullYear();</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>63</code></td>
<td><code>            </code><code>case</code> <code>'h'</code><code>: </code><code>return</code> <code>date.getHours() % 12 || 12;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>64</code></td>
<td><code>            </code><code>case</code> <code>'hh'</code><code>: </code><code>return</code> <code>zeroize(date.getHours() % 12 || 12);</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>65</code></td>
<td><code>            </code><code>case</code> <code>'H'</code><code>: </code><code>return</code> <code>date.getHours();</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>66</code></td>
<td><code>            </code><code>case</code> <code>'HH'</code><code>: </code><code>return</code> <code>zeroize(date.getHours());</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>67</code></td>
<td><code>            </code><code>case</code> <code>'m'</code><code>: </code><code>return</code> <code>date.getMinutes();</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>68</code></td>
<td><code>            </code><code>case</code> <code>'mm'</code><code>: </code><code>return</code> <code>zeroize(date.getMinutes());</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>69</code></td>
<td><code>            </code><code>case</code> <code>'s'</code><code>: </code><code>return</code> <code>date.getSeconds();</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>70</code></td>
<td><code>            </code><code>case</code> <code>'ss'</code><code>: </code><code>return</code> <code>zeroize(date.getSeconds());</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>71</code></td>
<td><code>            </code><code>case</code> <code>'l'</code><code>: </code><code>return</code> <code>date.getMilliseconds();</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>72</code></td>
<td><code>            </code><code>case</code> <code>'ll'</code><code>: </code><code>return</code> <code>zeroize(date.getMilliseconds());</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>73</code></td>
<td><code>            </code><code>case</code> <code>'tt'</code><code>: </code><code>return</code> <code>date.getHours() &lt; 12 ? </code><code>'am'</code> <code>: </code><code>'pm'</code><code>;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>74</code></td>
<td><code>            </code><code>case</code> <code>'TT'</code><code>: </code><code>return</code> <code>date.getHours() &lt; 12 ? </code><code>'AM'</code> <code>: </code><code>'PM'</code><code>;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>75</code></td>
<td><code>        </code><code>}</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>76</code></td>
<td><code>    </code><code>});</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>77</code></td>
<td><code>}</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
测试：
<div id="highlighter_635138">
<div>
<div>
<table>
<tbody>
<tr>
<td><code>1</code></td>
<td><code>&lt;script type=</code><code>"text/javascript"</code><code>&gt;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>2</code></td>
<td><code>　　document.writeln(</code><code>new</code> <code>Date().format(</code><code>"yyyy-MM-dd hh:mm:ss"</code><code>));</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>3</code></td>
<td><code>&lt;/script&gt;</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>4</code></td>
<td><code>// 结果：</code></td>
</tr>
</tbody>
</table>
</div>
<div>
<table>
<tbody>
<tr>
<td><code>5</code></td>
<td><code>// 2011-04-08 10:13:37</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
以后的工作和学习中，会不断增加和完善自己的代码库，有什么问题请多多指教。

摘自：http://www.nowamagic.net/librarys/veda/detail/1282

补充：

//检测日期是否合法@ChinaBUG 2014.10.24
function CheckDate(strDate) {
if (strDate == "") return false;
strDate = strDate.replace(/-/g, "/");
var d = new Date(strDate);
if (isNaN(d)) return false;
var arr = strDate.split("/");
alert(parseInt(arr[2], 10));
return ((parseInt(arr[0], 10) == d.getFullYear()) &amp;&amp; (parseInt(arr[1], 10) == (d.getMonth() + 1)) &amp;&amp; (parseInt(arr[2], 10) == d.getDate()));
}